<link rel="import" href="cz-registry.html">
<link rel="import" href="cz-config.html">
<link rel="import" href="cz-review-latency-dash.html">
<link rel="import" href="cz-milestones-dash.html">
<link rel="import" href="cz-review-load-dash.html">
<link rel="import" href="cz-cardview.html">
<link rel="import" href="cz-dashview.html">
<link rel="import" href="cz-calendar-feed-source.html">

<script src="chromez-api.js"></script>

<style>
* {
  font-family: Roboto;
}

body {
  margin: 0;
  background: #ECEFF1;
  overflow: hidden;
  width: 100vw;
  height: 100vh;
  display: flex;
  flex-flow: row;
  --card-padding: 5px;
}

paper-material, paper-card {
  background: white;
}

.paper-card-0 .card-content {
  padding-top: 0;
}

cz-dashview, cz-dashview {
  height: 100vh;
}

paper-card {
  margin: var(--card-padding);
}

</style>

<cz-registry>
  <cz-config id=config></cz-config>
</cz-registry>

<cz-dashview id='dash' total-columns=4 columns=2>
</cz-dashview>

<cz-cardview id='feed' total-columns=4 columns=2></cz-cardview>

<script>
registerSource('cz-config', 'dashes', dashes => dashes.forEach(a => addDash(a, feed)));
registerSource('cz-config', 'cardview-columns', cvColumns => {
  if (cvColumns) {
    feed.columns = cvColumns;
    feed.totalColumns = Number(cvColumns) + Number(dash.columns);
    dash.totalColumns = Number(cvColumns) + Number(dash.columns);
  }
});
registerSource('cz-config', 'dashview-columns', dvColumns => {
  if (dvColumns) {
    dash.columns = dvColumns;
    feed.totalColumns = Number(dvColumns) + Number(feed.columns);
    dash.totalColumns = Number(dvColumns) + Number(feed.columns);
  }
});
</script>
